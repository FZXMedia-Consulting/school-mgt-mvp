
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<base href='http://vikku.info/programming/' />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta http-equiv="content-language" content="en" />

<title>Get Country State City Hierarchy - Get list of country, state, city using GeoNames</title>
<meta name="keywords" content="geographic names, geonames hierarchy, world places list, world places hierarchy, list of country, list of city, list of state, geonames country/state/city list, geographical names list, geographical hierarchy, gennames hierarchy, geonames list, geoinformation, scripting world places" />
<meta name="description" content="Get a hierarchy of country, state, city using geonames database. List by country and then list by state and then list all cities using geonames database. Get all places(geoinformation) using this code." />

<meta property="fb:app_id" content="124948124275250"/>
<meta property='og:title' content='Get Country State City Hierarchy - Get list of country, state, city using GeoNames' />
<meta property='og:site_name' content='Jayapal Chandran Programming' />
<meta property='og:url' content='http://vikku.info/programming/geodata/geonames-get-country-state-city-hierarchy.htm' />
<meta property='og:type' content='article' />
<meta property='og:image' content='http://vikku.info/programming/images/source-code.png' />
<meta property='og:description' content="Get a hierarchy of country, state, city using geonames database. List by country and then list by state and then list all cities using geonames database. Get all places(geoinformation) using this code." />
<meta property="fb:admin" content="595761942" />
<meta property="fb:app_id" content="124948124275250" />

<meta itemprop="name" content="Get Country State City Hierarchy - Get list of country, state, city using GeoNames" />
<meta itemprop="description" content="Get a hierarchy of country, state, city using geonames database. List by country and then list by state and then list all cities using geonames database. Get all places(geoinformation) using this code." />
<meta itemprop="image" content="http://vikku.info/programming/images/source-code.png" />

<link rel='stylesheet' type='text/css' href='http://vikku.info/programming/css/pstyle.css'></link>
<script type="text/javascript" src="http://vikku.info/programming/js/sh/shCore.js"></script>
<script type="text/javascript" src="http://vikku.info/programming/js/sh/shBrushJScript.js"></script>
<script type="text/javascript" src="http://vikku.info/programming/js/sh/shBrushPhp.js"></script>
<link type="text/css" rel="stylesheet" href="http://vikku.info/programming/js/sh/shCoreDefault.css"/>
<script type="text/javascript">SyntaxHighlighter.all();</script>
</head>
<body>

<div class='main'>
<style type="text/css">
.contents { background-color:#EDF4F8; padding:10px; border:2px dashed #C2DAE7; width: 70%; margin: 0 auto; }
.contents p span { display:block;float:left; margin-left:0px; width:110px; color:gray; font-weight:bold;}
.contents p select {float:left; margin-left:90px;}
.contents p {clear:both;overflow:hidden;}
</style>

<script type="text/javascript" src="js/geodata-jsr-class.js"></script>


<div class="contents">

<p><span>Continent:</span> <select name="continent" id="continent" onchange="getplaces(this.value,'country', this.id);">
<option value=""></option>						
</select>
</p>

<p><span>Country:</span> <select name="country" id="country" onchange="getplaces(this.value,'province', this.id);">
<option value=""></option>						
</select>
</p>

<select name="ff" id="ff" onchange=""></select>

<p><span>State / Provice:</span> <select name="province" id="province" onchange="getplaces(this.value,'region', this.id)">
<option value=""></option>
</select>
</p>

<p><span>County / Region:</span> <select name="region" id="region" onchange="getplaces(this.value,'city', this.id)">
<option value=""></option>
</select>
</p>

<p><span>City:</span> <select name="city" id="city" onchange="document.getElementById('city_display').value = this.options[this.selectedIndex].text">
<option value=""></option></select>
</p>

<input value="" id="continent_display" type="text"/>
<input value="" id="country_display" type="text"/>
<input value="" id="province_display" type="text"/>
<input value="" id="region_display" type="text"/>
<input value="" id="city_display" type="text"/>

</div>


<script type="text/javascript">
var whos=null;
function getplaces(gid,src,eid)
{
	whos = src

    console.log("Step a");

    for(var i = 1; i <= 7; i++)
    {
        console.log(i);
        if(i == 1)
        {
            //gid = 6255146;

            var request = "http://www.geonames.org/childrenJSON?geonameId="+gid+"&callback=listPlaces&style=long";
            aObj = new JSONscriptRequest(request);
            aObj.buildScriptTag();
            aObj.addScriptTag();
        }
         if(i == 2)
        {
            gid = 6255147;

            var request = "http://www.geonames.org/childrenJSON?geonameId="+gid+"&callback=listPlaces&style=long";
            aObj = new JSONscriptRequest(request);
            aObj.buildScriptTag();
            aObj.addScriptTag();
        }
        else if(i == 3)
        {
            gid = 6255148;

            var request = "http://www.geonames.org/childrenJSON?geonameId="+gid+"&callback=listPlaces&style=long";
            aObj = new JSONscriptRequest(request);
            aObj.buildScriptTag();
            aObj.addScriptTag();
        }
        else if(i == 4)
        {
            gid = 6255149;

            var request = "http://www.geonames.org/childrenJSON?geonameId="+gid+"&callback=listPlaces&style=long";
            aObj = new JSONscriptRequest(request);
            aObj.buildScriptTag();
            aObj.addScriptTag();
        }
        else if(i == 5)
        {
            gid = 6255151;

            var request = "http://www.geonames.org/childrenJSON?geonameId="+gid+"&callback=listPlaces&style=long";
            aObj = new JSONscriptRequest(request);
            aObj.buildScriptTag();
            aObj.addScriptTag();
        }
        else if(i == 6)
        {
            gid = 6255150;

            var request = "http://www.geonames.org/childrenJSON?geonameId="+gid+"&callback=listPlaces&style=long";
            aObj = new JSONscriptRequest(request);
            aObj.buildScriptTag();
            aObj.addScriptTag();
        }
        else if(i == 7)
        {
            gid = 6255152;
            
            var request = "http://www.geonames.org/childrenJSON?geonameId="+gid+"&callback=listPlaces&style=long";
            aObj = new JSONscriptRequest(request);
            aObj.buildScriptTag();
            aObj.addScriptTag();
        }
        console.log("End");
    }

    
    if(eid != null | undefined)
    {
        var txtvalue = document.getElementById(eid).options[document.getElementById(eid).selectedIndex].text;
        
        if(eid == "continent")
        {
            document.getElementById("continent_display").value = txtvalue;
            document.getElementById("country_display").value = "";
            document.getElementById("province_display").value = "";
            document.getElementById("region_display").value = "";
            document.getElementById('city_display').value = "";
        }
        else if(eid == "country")
        {
            document.getElementById("country_display").value = txtvalue;
            document.getElementById("province_display").value = "";
            document.getElementById("region_display").value = "";
            document.getElementById('city_display').value = "";
        }
        else if(eid == "province")
        {
            document.getElementById("province_display").value = txtvalue;
            document.getElementById("region_display").value = "";
            document.getElementById('city_display').value = "";
        }
        else if(eid == "region")
        {
            document.getElementById("region_display").value = txtvalue;
            document.getElementById('city_display').value = "";
        }
    }
}

function listPlaces(jData)
{
    
    counts = jData.geonames.length<jData.totalResultsCount ? jData.geonames.length : jData.totalResultsCount
	who = document.getElementById(whos)
	who.options.length = 0;
	
    console.log(counts);
    
	if(counts)who.options[who.options.length] = new Option('Select','')
	else who.options[who.options.length] = new Option('No Data Available','NULL')
			
	for(var i=0;i<counts;i++)
    {
        // document.getElementById("country").innerHTML += `<option>${jData.geonames[i].name}</option>`
        document.getElementById(whos).innerHTML += `<option value="${jData.geonames[i].geonameId}">${jData.geonames[i].name}</option>`
        console.log(jData.geonames[i].name,jData.geonames[i].geonameId);
		// who.options[who.options.length] = new Option(jData.geonames[i].name,jData.geonames[i].geonameId)
        // console.log(who);
    }

	delete jData;
	jData = null
}

window.onload = function() { getplaces(6255146,'country'); }
</script>


</div>
<!-- end div main -->
</body>
</html>